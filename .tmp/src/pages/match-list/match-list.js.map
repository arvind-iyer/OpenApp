{"version":3,"sources":["/home/arvind/coding/entr/hybrid/gotnext/src/pages/match-list/match-list.ts","/home/arvind/coding/entr/hybrid/gotnext/src/pages/match-list/match-list.ts.pre-build-optimizer.js"],"names":[],"mappings":"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","file":"/home/arvind/coding/entr/hybrid/gotnext/src/pages/match-list/match-list.ts.post-build-optimizer.js","sourceRoot":"","sourcesContent":["import { Component } from '@angular/core';\n\nimport {\n  Config,\n  NavController,\n  ModalController\n} from 'ionic-angular';\nimport { InAppBrowser } from '@ionic-native/in-app-browser';\n\nimport { Observable } from 'rxjs/Observable';\nimport { MatchDetailPage } from '../match-detail/match-detail';\nimport { FirebaseDatabase, FirebaseAuth, FirebaseMessaging } from '../../providers/firebase/firebase';\n\n\nimport { CreateMatchPage } from '../create-match/create-match'; \nimport { ScheduleFilterPage } from '../schedule-filter/schedule-filter';\nimport { Match } from '../../interfaces/match';\n// import {LoginPage} from '../login/login';\n\n@Component({\n  selector: 'page-match-list',\n  templateUrl: 'match-list.html'\n})\nexport class MatchListPage {\n  matches: Observable<any[]>;\n  shownMatches : Match[] = [];\n  currentUser : any;\n  excludeStates: any = [];\n  \n  constructor(\n    public navCtrl: NavController,\n    public modalCtrl: ModalController,\n    public fbDb: FirebaseDatabase,\n    public fbAuth: FirebaseAuth,\n    public fbm: FirebaseMessaging,\n    public config: Config,\n    public inAppBrowser: InAppBrowser\n  ) {\n    this.fbAuth.afAuth.authState.subscribe(auth=> {\n      if (auth) {\n        this.matches = fbDb.getMatches();\n        this.matches.subscribe(matches => {\n          this.shownMatches = matches;\n        })\n        console.log(this.matches);\n      }\n    })\n    this.currentUser = fbAuth.currentUser;\n  }\n\n  ionViewDidLoad() {\n    console.log(this.matches);\n  }\n\n\n  goToMatchDetail(match: any) {\n    console.log(match);\n    this.navCtrl.push(MatchDetailPage, match);\n  }\n  \n  getTime(timestamp) {\n    var time = new Date(timestamp);\n    return  (\n        (\"0\" + time.getHours()).slice(-2)   + \":\" + \n        (\"0\" + time.getMinutes()).slice(-2)\n      );\n  }\n\n  presentFilter() {\n    let modal = this.modalCtrl.create(ScheduleFilterPage, this.excludeStates);\n    modal.present();\n\n    modal.onWillDismiss((data: any[]) => {\n      if (data) {\n        this.excludeStates = data;\n        console.log(this.excludeStates);\n        this.updateMatchList();\n      }\n    });\n\n  }\n\n  updateMatchList() {\n    this.shownMatches = [];\n    this.matches.subscribe( (matches) =>  {\n      matches.forEach(m => {\n        var s = this.getState(m);\n        if (this.excludeStates.indexOf(this.capitalize(s)) === -1) {\n          this.shownMatches.push(m);\n        }\n      });\n    });\n  }\n  private capitalize(s : string) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }\n  getDate(timestamp) {\n    return (new Date(timestamp)).toDateString();\n  }\n\n\n  getState(match) {\n    var state : string;\n    if(this.currentUser == null) {\n      return;\n    }\n    if(match.participants[0] == this.currentUser.uid) {\n      state = \"hosted\";\n    }\n    else if(match.participants.indexOf(this.currentUser.uid) >= 0) {\n      state = \"joined\";\n    }\n    else if(match.participants.length >= match.max_capacity) {\n      state = \"full\";\n    }\n    else {\n      state = \"available\";\n    }\n    if(match) {\n      match.state = state;\n    }\n    return state;\n  }\n\n  openCreateMatchModal() {\n    let cmModal = this.modalCtrl.create(CreateMatchPage);\n    cmModal.present();\n  }\n\n  deleteMatch(match) {\n    let ms : any[] = [];\n    this.matches.subscribe(data => {\n      ms = data;\n      let x = ms.filter(function(x){\n        return x.start_time == match.start_time && x.end_time == match.end_time\n      });\n      console.log(x.length > 0 && x.keys().next().value);\n    })\n  }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { Component } from '@angular/core';\nimport { Config, NavController, ModalController } from 'ionic-angular';\nimport { InAppBrowser } from '@ionic-native/in-app-browser';\nimport { MatchDetailPage } from '../match-detail/match-detail';\nimport { FirebaseDatabase, FirebaseAuth, FirebaseMessaging } from '../../providers/firebase/firebase';\nimport { CreateMatchPage } from '../create-match/create-match';\nimport { ScheduleFilterPage } from '../schedule-filter/schedule-filter';\n// import {LoginPage} from '../login/login';\nvar MatchListPage = (function () {\n    function MatchListPage(navCtrl, modalCtrl, fbDb, fbAuth, fbm, config, inAppBrowser) {\n        var _this = this;\n        this.navCtrl = navCtrl;\n        this.modalCtrl = modalCtrl;\n        this.fbDb = fbDb;\n        this.fbAuth = fbAuth;\n        this.fbm = fbm;\n        this.config = config;\n        this.inAppBrowser = inAppBrowser;\n        this.shownMatches = [];\n        this.excludeStates = [];\n        this.fbAuth.afAuth.authState.subscribe(function (auth) {\n            if (auth) {\n                _this.matches = fbDb.getMatches();\n                _this.matches.subscribe(function (matches) {\n                    _this.shownMatches = matches;\n                });\n                console.log(_this.matches);\n            }\n        });\n        this.currentUser = fbAuth.currentUser;\n    }\n    MatchListPage.prototype.ionViewDidLoad = function () {\n        console.log(this.matches);\n    };\n    MatchListPage.prototype.goToMatchDetail = function (match) {\n        console.log(match);\n        this.navCtrl.push(MatchDetailPage, match);\n    };\n    MatchListPage.prototype.getTime = function (timestamp) {\n        var time = new Date(timestamp);\n        return ((\"0\" + time.getHours()).slice(-2) + \":\" +\n            (\"0\" + time.getMinutes()).slice(-2));\n    };\n    MatchListPage.prototype.presentFilter = function () {\n        var _this = this;\n        var modal = this.modalCtrl.create(ScheduleFilterPage, this.excludeStates);\n        modal.present();\n        modal.onWillDismiss(function (data) {\n            if (data) {\n                _this.excludeStates = data;\n                console.log(_this.excludeStates);\n                _this.updateMatchList();\n            }\n        });\n    };\n    MatchListPage.prototype.updateMatchList = function () {\n        var _this = this;\n        this.shownMatches = [];\n        this.matches.subscribe(function (matches) {\n            matches.forEach(function (m) {\n                var s = _this.getState(m);\n                if (_this.excludeStates.indexOf(_this.capitalize(s)) === -1) {\n                    _this.shownMatches.push(m);\n                }\n            });\n        });\n    };\n    MatchListPage.prototype.capitalize = function (s) {\n        return s.charAt(0).toUpperCase() + s.slice(1);\n    };\n    MatchListPage.prototype.getDate = function (timestamp) {\n        return (new Date(timestamp)).toDateString();\n    };\n    MatchListPage.prototype.getState = function (match) {\n        var state;\n        if (this.currentUser == null) {\n            return;\n        }\n        if (match.participants[0] == this.currentUser.uid) {\n            state = \"hosted\";\n        }\n        else if (match.participants.indexOf(this.currentUser.uid) >= 0) {\n            state = \"joined\";\n        }\n        else if (match.participants.length >= match.max_capacity) {\n            state = \"full\";\n        }\n        else {\n            state = \"available\";\n        }\n        if (match) {\n            match.state = state;\n        }\n        return state;\n    };\n    MatchListPage.prototype.openCreateMatchModal = function () {\n        var cmModal = this.modalCtrl.create(CreateMatchPage);\n        cmModal.present();\n    };\n    MatchListPage.prototype.deleteMatch = function (match) {\n        var ms = [];\n        this.matches.subscribe(function (data) {\n            ms = data;\n            var x = ms.filter(function (x) {\n                return x.start_time == match.start_time && x.end_time == match.end_time;\n            });\n            console.log(x.length > 0 && x.keys().next().value);\n        });\n    };\n    MatchListPage = __decorate([\n        Component({\n            selector: 'page-match-list',\n            templateUrl: 'match-list.html'\n        }),\n        __metadata(\"design:paramtypes\", [NavController,\n            ModalController,\n            FirebaseDatabase,\n            FirebaseAuth,\n            FirebaseMessaging,\n            Config,\n            InAppBrowser])\n    ], MatchListPage);\n    return MatchListPage;\n}());\nexport { MatchListPage };\n//# sourceMappingURL=match-list.js.map"]}